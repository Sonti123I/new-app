import{S as He,s as ze,h as be,g as Ke,n as je,b as Ge,r as o,c as Ve,d as qe,j as c,a as Je,t as ye}from"./main-B1ytRjOs.js";import{c as U,a as Ze,B as xe}from"./button-Di90ER_y.js";var Qe=class extends He{#t;#r=void 0;#e;#n;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#t.defaultMutationOptions(t),ze(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#e,observer:this}),e?.mutationKey&&this.options.mutationKey&&be(e.mutationKey)!==be(this.options.mutationKey)?this.reset():this.#e?.state.status==="pending"&&this.#e.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#e?.removeObserver(this)}onMutationUpdate(t){this.#a(),this.#s(t)}getCurrentResult(){return this.#r}reset(){this.#e?.removeObserver(this),this.#e=void 0,this.#a(),this.#s()}mutate(t,e){return this.#n=e,this.#e?.removeObserver(this),this.#e=this.#t.getMutationCache().build(this.#t,this.options),this.#e.addObserver(this),this.#e.execute(t)}#a(){const t=this.#e?.state??Ke();this.#r={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#s(t){je.batch(()=>{if(this.#n&&this.hasListeners()){const e=this.#r.variables,n=this.#r.context,r={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#n.onSuccess?.(t.data,e,n,r),this.#n.onSettled?.(t.data,null,e,n,r)):t?.type==="error"&&(this.#n.onError?.(t.error,e,n,r),this.#n.onSettled?.(void 0,t.error,e,n,r))}this.listeners.forEach(e=>{e(this.#r)})})}};function we(t,e){const n=Ge(),[r]=o.useState(()=>new Qe(n,t));o.useEffect(()=>{r.setOptions(t)},[r,t]);const s=o.useSyncExternalStore(o.useCallback(u=>r.subscribe(je.batchCalls(u)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=o.useCallback((u,d)=>{r.mutate(u,d).catch(Ve)},[r]);if(s.error&&qe(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}/*! js-cookie v3.0.5 | MIT */function Q(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var Xe={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function se(t,e){function n(s,a,u){if(!(typeof document>"u")){u=Q({},e,u),typeof u.expires=="number"&&(u.expires=new Date(Date.now()+u.expires*864e5)),u.expires&&(u.expires=u.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var p in u)u[p]&&(d+="; "+p,u[p]!==!0&&(d+="="+u[p].split(";")[0]));return document.cookie=s+"="+t.write(a,s)+d}}function r(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var a=document.cookie?document.cookie.split("; "):[],u={},d=0;d<a.length;d++){var p=a[d].split("="),y=p.slice(1).join("=");try{var b=decodeURIComponent(p[0]);if(u[b]=t.read(y,b),s===b)break}catch{}}return s?u[s]:u}}return Object.create({set:n,get:r,remove:function(s,a){n(s,"",Q({},a,{expires:-1}))},withAttributes:function(s){return se(this.converter,Q({},this.attributes,s))},withConverter:function(s){return se(Q({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var _=se(Xe,{path:"/"});function Ye({className:t,type:e,...n}){return c.jsx("input",{type:e,"data-slot":"input",className:U("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var et=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],tt=et.reduce((t,e)=>{const n=Ze(`Primitive.${e}`),r=o.forwardRef((s,a)=>{const{asChild:u,...d}=s,p=u?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(p,{...d,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),nt="Label",Te=o.forwardRef((t,e)=>c.jsx(tt.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Te.displayName=nt;var rt=Te;function Ce({className:t,...e}){return c.jsx(rt,{"data-slot":"label",className:U("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}var at=Object.defineProperty,st=Object.defineProperties,ot=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,Se=(t,e,n)=>e in t?at(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,it=(t,e)=>{for(var n in e||(e={}))Oe.call(e,n)&&Se(t,n,e[n]);if(Y)for(var n of Y(e))ke.call(e,n)&&Se(t,n,e[n]);return t},lt=(t,e)=>st(t,ot(e)),ut=(t,e)=>{var n={};for(var r in t)Oe.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Y)for(var r of Y(t))e.indexOf(r)<0&&ke.call(t,r)&&(n[r]=t[r]);return n};function ct(t){let e=setTimeout(t,0),n=setTimeout(t,10),r=setTimeout(t,50);return[e,n,r]}function dt(t){let e=o.useRef();return o.useEffect(()=>{e.current=t}),e.current}var pt=18,Pe=40,ht=`${Pe}px`,ft=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function mt({containerRef:t,inputRef:e,pushPasswordManagerStrategy:n,isFocused:r}){let[s,a]=o.useState(!1),[u,d]=o.useState(!1),[p,y]=o.useState(!1),b=o.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&s&&u,[s,u,n]),O=o.useCallback(()=>{let h=t.current,C=e.current;if(!h||!C||p||n==="none")return;let j=h,P=j.getBoundingClientRect().left+j.offsetWidth,W=j.getBoundingClientRect().top+j.offsetHeight/2,m=P-pt,H=W;document.querySelectorAll(ft).length===0&&document.elementFromPoint(m,H)===h||(a(!0),y(!0))},[t,e,p,n]);return o.useEffect(()=>{let h=t.current;if(!h||n==="none")return;function C(){let P=window.innerWidth-h.getBoundingClientRect().right;d(P>=Pe)}C();let j=setInterval(C,1e3);return()=>{clearInterval(j)}},[t,n]),o.useEffect(()=>{let h=r||document.activeElement===e.current;if(n==="none"||!h)return;let C=setTimeout(O,0),j=setTimeout(O,2e3),P=setTimeout(O,5e3),W=setTimeout(()=>{y(!0)},6e3);return()=>{clearTimeout(C),clearTimeout(j),clearTimeout(P),clearTimeout(W)}},[e,r,n,O]),{hasPWMBadge:s,willPushPWMBadge:b,PWM_BADGE_SPACE_WIDTH:ht}}var Me=o.createContext({}),Re=o.forwardRef((t,e)=>{var n=t,{value:r,onChange:s,maxLength:a,textAlign:u="left",pattern:d,placeholder:p,inputMode:y="numeric",onComplete:b,pushPasswordManagerStrategy:O="increase-width",pasteTransformer:h,containerClassName:C,noScriptCSSFallback:j=gt,render:P,children:W}=n,m=ut(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),H,oe,ie,le,ue;let[Ne,Le]=o.useState(typeof m.defaultValue=="string"?m.defaultValue:""),g=r??Ne,D=dt(g),z=o.useCallback(i=>{s?.(i),Le(i)},[s]),k=o.useMemo(()=>d?typeof d=="string"?new RegExp(d):d:null,[d]),v=o.useRef(null),ee=o.useRef(null),te=o.useRef({value:g,onChange:z,isIOS:typeof window<"u"&&((oe=(H=window?.CSS)==null?void 0:H.supports)==null?void 0:oe.call(H,"-webkit-touch-callout","none"))}),J=o.useRef({prev:[(ie=v.current)==null?void 0:ie.selectionStart,(le=v.current)==null?void 0:le.selectionEnd,(ue=v.current)==null?void 0:ue.selectionDirection]});o.useImperativeHandle(e,()=>v.current,[]),o.useEffect(()=>{let i=v.current,l=ee.current;if(!i||!l)return;te.current.value!==i.value&&te.current.onChange(i.value),J.current.prev=[i.selectionStart,i.selectionEnd,i.selectionDirection];function x(){if(document.activeElement!==i){G(null),V(null);return}let f=i.selectionStart,w=i.selectionEnd,Z=i.selectionDirection,T=i.maxLength,L=i.value,M=J.current.prev,R=-1,A=-1,I;if(L.length!==0&&f!==null&&w!==null){let Fe=f===w,$e=f===L.length&&L.length<T;if(Fe&&!$e){let B=f;if(B===0)R=0,A=1,I="forward";else if(B===T)R=B-1,A=B,I="backward";else if(T>1&&L.length>1){let ae=0;if(M[0]!==null&&M[1]!==null){I=B<M[1]?"backward":"forward";let Ue=M[0]===M[1]&&M[0]<T;I==="backward"&&!Ue&&(ae=-1)}R=ae+B,A=ae+B+1}}R!==-1&&A!==-1&&R!==A&&v.current.setSelectionRange(R,A,I)}let ge=R!==-1?R:f,ve=A!==-1?A:w,We=I??Z;G(ge),V(ve),J.current.prev=[ge,ve,We]}if(document.addEventListener("selectionchange",x,{capture:!0}),x(),document.activeElement===i&&ne(!0),!document.getElementById("input-otp-style")){let f=document.createElement("style");if(f.id="input-otp-style",document.head.appendChild(f),f.sheet){let w="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";q(f.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),q(f.sheet,`[data-input-otp]:autofill { ${w} }`),q(f.sheet,`[data-input-otp]:-webkit-autofill { ${w} }`),q(f.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),q(f.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let S=()=>{l&&l.style.setProperty("--root-height",`${i.clientHeight}px`)};S();let E=new ResizeObserver(S);return E.observe(i),()=>{document.removeEventListener("selectionchange",x,{capture:!0}),E.disconnect()}},[]);let[ce,de]=o.useState(!1),[K,ne]=o.useState(!1),[N,G]=o.useState(null),[F,V]=o.useState(null);o.useEffect(()=>{ct(()=>{var i,l,x,S;(i=v.current)==null||i.dispatchEvent(new Event("input"));let E=(l=v.current)==null?void 0:l.selectionStart,f=(x=v.current)==null?void 0:x.selectionEnd,w=(S=v.current)==null?void 0:S.selectionDirection;E!==null&&f!==null&&(G(E),V(f),J.current.prev=[E,f,w])})},[g,K]),o.useEffect(()=>{D!==void 0&&g!==D&&D.length<a&&g.length===a&&b?.(g)},[a,b,D,g]);let $=mt({containerRef:ee,inputRef:v,pushPasswordManagerStrategy:O,isFocused:K}),pe=o.useCallback(i=>{let l=i.currentTarget.value.slice(0,a);if(l.length>0&&k&&!k.test(l)){i.preventDefault();return}typeof D=="string"&&l.length<D.length&&document.dispatchEvent(new Event("selectionchange")),z(l)},[a,z,D,k]),he=o.useCallback(()=>{var i;if(v.current){let l=Math.min(v.current.value.length,a-1),x=v.current.value.length;(i=v.current)==null||i.setSelectionRange(l,x),G(l),V(x)}ne(!0)},[a]),fe=o.useCallback(i=>{var l,x;let S=v.current;if(!h&&(!te.current.isIOS||!i.clipboardData||!S))return;let E=i.clipboardData.getData("text/plain"),f=h?h(E):E;i.preventDefault();let w=(l=v.current)==null?void 0:l.selectionStart,Z=(x=v.current)==null?void 0:x.selectionEnd,T=(w!==Z?g.slice(0,w)+f+g.slice(Z):g.slice(0,w)+f+g.slice(w)).slice(0,a);if(T.length>0&&k&&!k.test(T))return;S.value=T,z(T);let L=Math.min(T.length,a-1),M=T.length;S.setSelectionRange(L,M),G(L),V(M)},[a,z,k,g]),Ie=o.useMemo(()=>({position:"relative",cursor:m.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[m.disabled]),me=o.useMemo(()=>({position:"absolute",inset:0,width:$.willPushPWMBadge?`calc(100% + ${$.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:$.willPushPWMBadge?`inset(0 ${$.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:u,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[$.PWM_BADGE_SPACE_WIDTH,$.willPushPWMBadge,u]),Be=o.useMemo(()=>o.createElement("input",lt(it({autoComplete:m.autoComplete||"one-time-code"},m),{"data-input-otp":!0,"data-input-otp-placeholder-shown":g.length===0||void 0,"data-input-otp-mss":N,"data-input-otp-mse":F,inputMode:y,pattern:k?.source,"aria-placeholder":p,style:me,maxLength:a,value:g,ref:v,onPaste:i=>{var l;fe(i),(l=m.onPaste)==null||l.call(m,i)},onChange:pe,onMouseOver:i=>{var l;de(!0),(l=m.onMouseOver)==null||l.call(m,i)},onMouseLeave:i=>{var l;de(!1),(l=m.onMouseLeave)==null||l.call(m,i)},onFocus:i=>{var l;he(),(l=m.onFocus)==null||l.call(m,i)},onBlur:i=>{var l;ne(!1),(l=m.onBlur)==null||l.call(m,i)}})),[pe,he,fe,y,me,a,F,N,m,k?.source,g]),re=o.useMemo(()=>({slots:Array.from({length:a}).map((i,l)=>{var x;let S=K&&N!==null&&F!==null&&(N===F&&l===N||l>=N&&l<F),E=g[l]!==void 0?g[l]:null,f=g[0]!==void 0?null:(x=p?.[l])!=null?x:null;return{char:E,placeholderChar:f,isActive:S,hasFakeCaret:S&&E===null}}),isFocused:K,isHovering:!m.disabled&&ce}),[K,ce,a,F,N,m.disabled,g]),_e=o.useMemo(()=>P?P(re):o.createElement(Me.Provider,{value:re},W),[W,re,P]);return o.createElement(o.Fragment,null,j!==null&&o.createElement("noscript",null,o.createElement("style",null,j)),o.createElement("div",{ref:ee,"data-input-otp-container":!0,style:Ie,className:C},_e,o.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Be)))});Re.displayName="Input";function q(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}var gt=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bt=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Ee=t=>{const e=bt(t);return e.charAt(0).toUpperCase()+e.slice(1)},Ae=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),yt=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=o.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:u,...d},p)=>o.createElement("svg",{ref:p,...xt,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Ae("lucide",s),...!a&&!yt(d)&&{"aria-hidden":"true"},...d},[...u.map(([y,b])=>o.createElement(y,b)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=(t,e)=>{const n=o.forwardRef(({className:r,...s},a)=>o.createElement(wt,{ref:a,iconNode:e,className:Ae(`lucide-${vt(Ee(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Ee(t),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=[["path",{d:"M5 12h14",key:"1ays0h"}]],Et=Ct("minus",St);function jt({className:t,containerClassName:e,...n}){return c.jsx(Re,{"data-slot":"input-otp",containerClassName:U("flex items-center gap-2 has-disabled:opacity-50",e),className:U("disabled:cursor-not-allowed",t),...n})}function Tt({className:t,...e}){return c.jsx("div",{"data-slot":"input-otp-group",className:U("flex items-center",t),...e})}function X({index:t,className:e,...n}){const r=o.useContext(Me),{char:s,hasFakeCaret:a,isActive:u}=r?.slots[t]??{};return c.jsxs("div",{"data-slot":"input-otp-slot","data-active":u,className:U("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",e),...n,children:[s,a&&c.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"animate-caret-blink bg-foreground h-4 w-px duration-1000"})})]})}function Ot({...t}){return c.jsx("div",{"data-slot":"input-otp-separator",role:"separator",...t,children:c.jsx(Et,{})})}const kt=(t,e)=>{let n;return n=e.map(r=>`${t}=${r}`),n.join("&")},Pt=(t,e)=>{const r=Object.keys(e).map(s=>{const a=e[s];return a&&a.length?Array.isArray(a)?kt(s,a):`${s}=${e[s]}`:a?`${s}=${e[s]}`:""}).filter(s=>s.length).filter(s=>s).join("&");return r?t+"?"+r:t};class Mt{authStatusCodes=[401,403,404,422];authErrorURLs=["/auth/login"];_fetchType;constructor(e="json"){this._fetchType=e}configureAuthorization(e){const n=_.get("token")||"";e.headers.Authorization="Bearer "+n}setHeader(e){e.headers={}}setDefaultHeaders(e){e.headers=e.headers||{},!e.headers["Content-Type"]&&!(e.body instanceof FormData)&&(e.headers["Content-Type"]="application/json")}checkToLogOutOrNot(e){return this.authErrorURLs.some(n=>e.includes(n))}isAuthRequest(e){return this.authErrorURLs.includes(e)}async refreshAccessToken(){const e=_.get("refreshToken");if(!e)return window.location.href="/",null;try{const n=await fetch("https://api-ai-salestable.tech-ddc.workers.dev/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(!n.ok)return _.remove("token"),_.remove("refreshToken"),window.location.href="/",null;const r=await n.json();return _.set("token",r.access_token),r.access_token}catch{return window.location.href="/",null}}async hit(...e){const[n,r]=e;r.headers=r.headers||{},r.headers["Content-Type"]||this.setDefaultHeaders(r),this.isAuthRequest(n)||this.configureAuthorization(r);const s="https://api-ai-salestable.tech-ddc.workers.dev"+n;let a=await fetch(s,r);if(!a.ok){if(a.status===401&&!this.checkToLogOutOrNot(n)){const y=await this.refreshAccessToken();y&&(r.headers.Authorization="Bearer "+y,a=await fetch(s,r),console.log(a))}if(this.authStatusCodes.includes(a.status)&&!this.checkToLogOutOrNot(n)){const y=a.headers.get("Content-Type")||"";let b;try{b=y.includes("text/html")?await a.text():await a.json()}catch{b={message:a.statusText}}throw{success:!1,status:a.status,data:b,message:a.statusText}}const u=a.headers.get("Content-Type")||"";let d;try{d=u.includes("text/html")?await a.text():await a.json()}catch{d={message:a.statusText}}const p=new Error(d.message||a.statusText);throw p.data=d,p.status=a.status,p}return this._fetchType==="response"?a:(a.headers.get("Content-Type")||"").includes("text/html")?{success:!0,status:a.status,data:await a.text()}:{success:!0,status:a.status,data:await a.json()}}async post(e,n){return await this.hit(e,{method:"POST",body:n?JSON.stringify(n):void 0})}async postFormData(e,n){return await this.hit(e,{method:"POST",body:n})}async get(e,n={},r){Object.keys(n).length&&(e=Pt(e,n));const s={method:"GET"};return this.setDefaultHeaders(s),r&&(s.headers["Content-Type"]=r,s.headers.Accept=r),this.hit(e,s)}async delete(e,n={}){return this.hit(e,{method:"DELETE",body:JSON.stringify(n)})}async deleteWithOutPayload(e){return this.hit(e,{method:"DELETE"})}async put(e,n={}){return this.hit(e,{method:"PUT",body:JSON.stringify(n)})}async patch(e,n={}){return this.hit(e,{method:"PATCH",body:JSON.stringify(n)})}}const De=new Mt;async function Rt(t){try{return await De.post("/auth/email-sign-in",t)}catch(e){throw console.log(e),e}}async function At(t){try{return await De.post("/auth/email-sign-in/verify",t)}catch(e){throw e}}function Dt(){const[t,e]=o.useState(""),[n,r]=o.useState(""),[s,a]=o.useState(!1),u=Je(),d=we({mutationKey:["email-verification"],mutationFn:async h=>await Rt(h),onSuccess:()=>{ye.success("OTP sent successfully"),a(!0)}}),p=we({mutationKey:["otp-verification"],mutationFn:async h=>(await At(h)).data,onSuccess:h=>{_.set("token",h.data.access_token),_.set("refreshToken",h.data.refresh_token),ye.success("Login successful!"),u({to:"/dashboard"})}}),y=h=>{h.preventDefault(),d.mutateAsync({email:t})},b=async h=>{h.preventDefault();const C=await p.mutateAsync({email:t,otp:n});console.log(C)},O=d.isPending||p.isPending;return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 via-white to-gray-100",children:c.jsxs("div",{className:"bg-white shadow-xl rounded-2xl p-10 w-full max-w-md transition-all duration-300 border border-gray-100",children:[c.jsx("h2",{className:"text-2xl font-semibold text-center mb-6 text-gray-800",children:s?"Verify OTP":"Login with Email"}),!s&&!O&&c.jsxs("form",{onSubmit:y,className:"flex flex-col gap-5 animate-fadeIn",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx(Ce,{className:"text-gray-700 font-medium",children:"Email"}),c.jsx(Ye,{type:"email",placeholder:"Enter your email",value:t,onChange:h=>e(h.target.value),required:!0,className:"h-10 px-3 border-gray-300 focus:ring-2 focus:ring-black/80 rounded-md"})]}),c.jsx(xe,{type:"submit",className:"bg-black hover:bg-gray-900 text-white w-full py-2 rounded-md transition-all duration-300",children:"Send OTP"})]}),s&&!O&&c.jsxs("form",{onSubmit:b,className:"flex flex-col items-center gap-6 animate-fadeIn",children:[c.jsxs("div",{className:"flex flex-col gap-2 w-full items-center",children:[c.jsx(Ce,{className:"text-gray-700 font-medium",children:"Enter OTP"}),c.jsx(jt,{maxLength:4,value:n,onChange:r,className:"mx-auto",children:c.jsxs(Tt,{children:[c.jsx(X,{index:0}),c.jsx(X,{index:1}),c.jsx(Ot,{}),c.jsx(X,{index:2}),c.jsx(X,{index:3})]})})]}),c.jsx(xe,{type:"submit",className:"bg-black hover:bg-gray-900 text-white w-full py-2 rounded-md transition-all duration-300",children:"Verify OTP"})]})]})})}function It(){return c.jsx("div",{children:c.jsx(Dt,{})})}export{It as component};
